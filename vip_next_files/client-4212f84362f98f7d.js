(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{69262:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return x}});var t=n(50029),o=n(16835),i=n(59499),p=n(4730),a=n(92777),s=n(82262),c=n(45959),u=n(63553),d=n(37247),l=n(87794),g=n.n(l),f=n(67294),v=n(14416),I=n(63028),O=n(11163),L=n.n(O),y=n(9008),h=n.n(y),A=n(31955),E=n(17563);n(26981);var b=n(85518),N=n(9692),m=n(34211),j=n(2893),S=n(34947),_=n(54956);function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;return n.type,r}}var w={page:P(),promo:P(),promoState:_.Z,sections:P([]),sorting:P([])},R=n(89332),k=n(14565),T=n(59671),Z=new Set(["header","footer","ts","http","serialno","token","refurl","id","prizeid","prizename","mode","test"]),C=n(74923),B=n(85893),D=["sections","language","forms"],Q=["isServer","router"];function G(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function F(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?G(Object(n),!0).forEach(function(r){(0,i.Z)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var x=(0,O.withRouter)((0,k.Z)(function(e){(0,c.Z)(l,e);var r,n,i=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,d.Z)(l);if(r){var t=(0,d.Z)(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return(0,u.Z)(this,e)});function l(e){(0,a.Z)(this,l),r=i.call(this,e);var r,n=e.isServer,t=e.router.query,o=t.initialState;r.state={recoverQuery:t,pageQS:""};var s=JSON.parse(void 0===o?"{}":o),c=s.sections,u=(s.language,s.forms,(0,p.Z)(s,D));return r.store=(0,N.Z)(F(F({sections:(0,m.Z)(c.data,s),sorting:c.sorting},u),{},{page:F(F({},u.page),{},{environment:t.ENVIR})}),n,w),L().onBuildIdMismatch=function(e){location.href=e},r}return(0,s.Z)(l,[{key:"componentDidMount",value:function(){var e,r,n=this.props.router.query,t=n.BUILD_ID,o=n.initialState,i=n.enableLogin,p=n.loginId;(0,j.Z)(t);var a=JSON.parse(void 0===o?"{}":o);i&&p&&A.Z.get("gtm_login_event")&&((0,S.Yq)({pageId:null==a?void 0:null===(e=a.page)||void 0===e?void 0:e.pageId,promoId:null==a?void 0:null===(r=a.promo)||void 0===r?void 0:r.id,loginType:C.loginTypesMapApiQuery[a.page.loginMethod]||"anonymous",loginId:p}),A.Z.remove("gtm_login_event")),this.getQueryString()}},{key:"getQueryString",value:function(){var e=this.props.router,r=(e=void 0===e?{}:e).query,n=(r=void 0===r?{}:r).initialState,t=JSON.parse(void 0===n?"{}":n).page,i=(t=void 0===t?{}:t).track,p=(i=void 0===i?{}:i).custom.biz_tracking,a=void 0===p?"":p,s=E.parse(window.location.search);if(a&&s){var c=new Set(a.split(",").map(function(e){return e.trim()})),u=Object.entries(s).reduce(function(e,r){var n=(0,o.default)(r,2),t=n[0],i=n[1];return!Z.has(t)&&c.has(t)&&(Array.isArray(i)?e+="&".concat(i.map(function(e){return"".concat(t,"=").concat(e)}).join("&")):e+="&".concat(t,"=").concat(i)),e},"").slice(1);u&&this.setState({pageQS:u})}}},{key:"render",value:function(){var e=this.props,r=(e.isServer,e.router.query),n=(r.params,r.isMobile,r.nonce),t=(0,p.Z)(e,Q),o=this.state,i=o.recoverQuery,a=o.pageQS,s=E.parse(location.search),c=void 0!==s.m,u=b.tq;return c&&(u=c),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(h(),{nonce:n,children:(0,B.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})}),(0,B.jsx)(v.zt,{store:this.store,children:(0,B.jsx)(I.ZP,{injectFirst:!0,children:(0,B.jsx)(T.Z.Provider,{value:a,children:(0,B.jsx)(R.Z,F({pageType:"client",query:F(F({},i),{},{isMobile:u,params:F({},s)})},t))})})})]})}}],[{key:"getInitialProps",value:(n=(0,t.Z)(g().mark(function e(r){var n;return g().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.req,e.abrupt("return",{isServer:!!n});case 2:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),l}(f.Component)))},74923:function(e,r,n){var t,o=n(930);function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function p(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach(function(r){o(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var a={ANONYMOUSLOGIN:0,FACEBOOKLOGIN:1,LINELOGIN:2,ENTERPRISELOGIN:3,CODE_VALIDATION_LOGIN:4},s={FACEBOOK:"facebook",LINE:"line",ENTERPRISE:"enterprise"},c=(o(t={},a.FACEBOOKLOGIN,s.FACEBOOK),o(t,a.LINELOGIN,s.LINE),o(t,a.ENTERPRISELOGIN,s.ENTERPRISE),t),u=["lineLoginAppBotPrompt","lineLoginAppId","lineLoginAppLiffId"],d=["facebookLoginAppId","lineLoginAppId","91appLoginAppId","enterpriseLoginAppId","enterpriseLiteLoginAppId","enterpriseCodeValidationLoginAppId","enterpriseLoginAppLogoutUrl","enableEnterpriseLoginFvQuery"],l=["uuid","facebookLoginAppId","lineLoginAppId","enterpriseLoginAppId","enterpriseLiteLoginAppId","enterpriseCodeValidationLoginAppId","enterpriseLoginAppLogoutUrl"];e.exports={retrieveLoginConfig:function(e){var r=e.partner,n=void 0===r?{}:r,t=e.sponsor,o=void 0===t?{}:t;return[d.reduce(function(e,r){return n[r]&&(e[r]=n[r]),e},{}),l.reduce(function(e,r){return o[r]&&(e[r]=o[r]),e},{})]},getAccessTokenQuery:function(e){var r,n,t,o,i,p,c=e.loginType,d=e.partner,l=void 0===d?{}:d,g=e.sponsor,f=void 0===g?{}:g;switch(c){case a.FACEBOOKLOGIN:return{login_type:s.FACEBOOK,app_id:f.facebookLoginAppId||l.facebookLoginAppId};case a.LINELOGIN:return{login_type:s.LINE,app_id:(t=void 0===(n=(r={partner:l,sponsor:f}).partner)?{}:n,p=Boolean((i=void 0===(o=r.sponsor)?{}:o).lineLoginAppId),u.reduce(function(e,r){var n=i[r],o=t[r];return e[r]=p?n:o,e},{})).lineLoginAppId};case a.ENTERPRISELOGIN:var v=l["91appLoginAppId"]||f.enterpriseLoginAppId||f.enterpriseLiteLoginAppId||f.enterpriseCodeValidationLoginAppId||l.enterpriseLoginAppId||l.enterpriseLiteLoginAppId||l.enterpriseCodeValidationLoginAppId;return{login_type:s.ENTERPRISE,app_id:v};default:return{}}},getLongTermLoginQuery:function(e){var r,n,t,o,i,s,c,u,d,l,g,f,v,I=e.loginType,O=e.partner,L=e.sponsor,y=void 0===L?{}:L,h=e.sponsorId,A=e.pageId,E={sponsor_uuid:y.uuid};return I===a.ENTERPRISELOGIN&&(E=p(p({},E),(t=void 0===(n=(r={partner:void 0===O?{}:O,sponsor:y,sponsorId:h,pageId:A}).partner)?{}:n,i=void 0===(o=r.sponsor)?{}:o,s=r.sponsorId,c=r.pageId,u=t.enterpriseLoginAppId,d=t.enterpriseLiteLoginAppId,l=t.enableEnterpriseLoginFvQuery,g=i.enterpriseLoginAppId,f=i.enterpriseLiteLoginAppId,v={},Boolean(l)&&(v.fv_sponsor_id=s,v.fv_page_id=c),(!g&&f||!u&&d)&&(v.subtype="lite"),v))),E},loginTypes:a,loginTypesForApi:s,loginTypesMapApiQuery:c}},42225:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/client",function(){return n(69262)}])}},function(e){e.O(0,[774,551,300,143,668,768,48,888,179],function(){return e(e.s=42225)}),_N_E=e.O()}]);